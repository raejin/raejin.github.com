function getNav(){var e=$("nav[role=navigation] fieldset[role=search]").after('<fieldset class="mobile-nav"></fieldset>').next().append("<select></select>");e.children("select").append('<option value="">Navigate…</option>');$("ul[role=main-navigation]").addClass("main-navigation");$("ul.main-navigation a").each(function(t,n){e.children("select").append('<option value="'+n.href+'">» '+n.text+"</option>")});$("ul.subscription a").each(function(t,n){e.children("select").append('<option value="'+n.href+'">» '+n.text+"</option>")});e.children("select").bind("change",function(e){if(e.target.value){window.location.href=e.target.value}});e.children("select").val("")}function addSidebarToggler(){if(!$("body").hasClass("sidebar-footer")){$("#content").append('<span class="toggle-sidebar"></span>');$(".toggle-sidebar").bind("click",function(e){e.preventDefault();if($("body").hasClass("collapse-sidebar")){$("body").removeClass("collapse-sidebar")}else{$("body").addClass("collapse-sidebar")}})}var e=$("aside.sidebar > section");if(e.length>1){e.each(function(t,n){if(e.length>=3&&t%3===0){$(n).addClass("first")}var r=(t+1)%2?"odd":"even";$(n).addClass(r)})}if(e.length>=3){$("aside.sidebar").addClass("thirds")}}function testFeatures(){var e=["maskImage"];$(e).map(function(e,t){if(Modernizr.testAllProps(t)){$("html").addClass(t)}else{$("html").addClass("no-"+t)}});if("placeholder"in document.createElement("input")){$("html").addClass("placeholder")}else{$("html").addClass("no-placeholder")}}function addCodeLineNumbers(){if(navigator.appName==="Microsoft Internet Explorer"){return}$("div.gist-highlight").each(function(e){var t='<table><tbody><tr><td class="gutter">',n='<pre class="line-numbers">',r='</pre></td><td class="code">',i="</td></tr></tbody></table>",s=$(".line",e).length;for(var o=1;o<=s;o++){n+='<span class="line-number">'+o+"</span>\n"}var u=t+n+r+"<pre>"+$("pre",e).html()+"</pre>"+i;$(e).html(u)})}function flashVideoFallback(){var e="/assets/jwplayer/player.swf",t="/assets/jwplayer/glow/glow.xml";$("video").each(function(n){n=$(n);if(!Modernizr.video.h264&&swfobject.getFlashPlayerVersion()||window.location.hash.indexOf("flash-test")!==-1){n.children("source[src$=mp4]").first().map(function(r,i){var s=$(i).attr("src"),o="video_"+Math.round(1+Math.random()*1e5),u=n.attr("width"),a=parseInt(n.attr("height"),10)+30;n.after('<div class="flash-video"><div><div id='+o+">");swfobject.embedSWF(e,o,u,a+30,"9.0.0",{file:s,image:n.attr("poster"),skin:t},{movie:s,wmode:"opaque",allowfullscreen:"true"})});n.remove()}})}function wrapFlashVideos(){$("object").each(function(e){e=$(e);if($("param[name=movie]",e).length){var t=e.before('<div class="flash-video"><div>').previous();$(t).children().append(e)}});$("iframe[src*=vimeo],iframe[src*=youtube]").each(function(e){e=$(e);var t=e.before('<div class="flash-video"><div>').previous();$(t).children().append(e)})}function renderDeliciousLinks(e){var t="<ul>";for(var n=0,r=e.length;n<r;n++){t+='<li><a href="'+e[n].u+'" title="Tags: '+(e[n].t==""?"":e[n].t.join(", "))+'">'+e[n].d+"</a></li>"}t+="</ul>";$("#delicious").html(t)}$("document").ready(function(){testFeatures();wrapFlashVideos();flashVideoFallback();addCodeLineNumbers();getNav();addSidebarToggler()});(function(e){function o(){s.content="width=device-width,minimum-scale="+i[0]+",maximum-scale="+i[1];e.removeEventListener(n,o,true)}var t="addEventListener",n="gesturestart",r="querySelectorAll",i=[1,1],s=r in e?e[r]("meta[name=viewport]"):[];if((s=s[s.length-1])&&t in e){o();i=[.25,1.6];e[t](n,o,true)}})(document);var swfobject=function(){function e(e,n,r){var u,f=t(r);if(l.wk&&l.wk<312)return u;if(f){if(typeof e.id==i)e.id=r;if(l.ie&&l.win){var c="",h;for(h in e)if(e[h]!=Object.prototype[h])h.toLowerCase()=="data"?n.movie=e[h]:h.toLowerCase()=="styleclass"?c+=' class="'+e[h]+'"':h.toLowerCase()!="classid"&&(c+=" "+h+'="'+e[h]+'"');h="";for(var p in n)n[p]!=Object.prototype[p]&&(h+='<param name="'+p+'" value="'+n[p]+'" />');f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+h+"</object>";u=t(e.id)}else{p=a.createElement(s);p.setAttribute("type",o);for(var d in e)e[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?p.setAttribute("class",e[d]):d.toLowerCase()!="classid"&&p.setAttribute(d,e[d]));for(c in n)n[c]!=Object.prototype[c]&&c.toLowerCase()!="movie"&&(e=p,h=c,d=n[c],r=a.createElement("param"),r.setAttribute("name",h),r.setAttribute("value",d),e.appendChild(r));f.parentNode.replaceChild(p,f);u=p}}return u}function t(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function n(e){var t=l.pv,e=e.split(".");e[0]=parseInt(e[0],10);e[1]=parseInt(e[1],10)||0;e[2]=parseInt(e[2],10)||0;return t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]?!0:!1}function r(e){return/[\\\"<>\.;]/.exec(e)!=null&&typeof encodeURIComponent!=i?encodeURIComponent(e):e}var i="undefined",s="object",o="application/x-shockwave-flash",u=window,a=document,f=navigator,l=function(){var e=typeof a.getElementById!=i&&typeof a.getElementsByTagName!=i&&typeof a.createElement!=i,t=f.userAgent.toLowerCase(),n=f.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),n=n?/mac/.test(n):/mac/.test(t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,l=!+"1",c=[0,0,0],h=null;if(typeof f.plugins!=i&&typeof f.plugins["Shockwave Flash"]==s){if((h=f.plugins["Shockwave Flash"].description)&&!(typeof f.mimeTypes!=i&&f.mimeTypes[o]&&!f.mimeTypes[o].enabledPlugin))l=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),c[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),c[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof u.ActiveXObject!=i)try{var p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(p&&(h=p.GetVariable("$version")))l=!0,h=h.split(" ")[1].split(","),c=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}catch(d){}return{w3:e,pv:c,wk:t,ie:l,win:r,mac:n}}();return{embedSWF:function(t,r,o,u,a,f,c,h,p){var d={success:!1,id:r};if(l.w3&&!(l.wk&&l.wk<312)&&t&&r&&o&&u&&a){o+="";u+="";var v={};if(h&&typeof h===s)for(var m in h)v[m]=h[m];v.data=t;v.width=o;v.height=u;t={};if(c&&typeof c===s)for(var y in c)t[y]=c[y];if(f&&typeof f===s)for(var b in f)typeof t.flashvars!=i?t.flashvars+="&"+b+"="+f[b]:t.flashvars=b+"="+f[b];if(n(a))r=e(v,t,r),d.success=!0,d.ref=r}p&&p(d)},ua:l,getFlashPlayerVersion:function(){return{major:l.pv[0],minor:l.pv[1],release:l.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(t,n,r){if(l.w3)return e(t,n,r)},getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return r(t);for(var t=t.split("&"),n=0;n<t.length;n++)if(t[n].substring(0,t[n].indexOf("="))==e)return r(t[n].substring(t[n].indexOf("=")+1))}return""}}}()